(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{1713:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/live",function(){return n(2626)}])},2626:function(e,t,n){"use strict";n.r(t);var i=n(5893),s=(n(3288),n(1163)),o=n(7294),l=n(4298),c=[];function a(e,t){if("undefined"!==typeof document){console.log(e,t,c);var n=document.getElementById("video"+e);Hls.isSupported()?(c[e]=new Hls,c[e].loadSource(t),c[e].attachMedia(n)):n.canPlayType("application/vnd.apple.mpegurl")&&(n.src=t)}}t.default=function(){"undefined"!==typeof document&&(c=[null,null,null,null,null,null,null]);var e=["https://playertest.longtailvideo.com/adaptive/vod-with-mp3/manifest.m3u8","https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8","https://playertest.longtailvideo.com/adaptive/aes-with-tracks/master.m3u8","https://test-streams.mux.dev/test_001/stream.m3u8","https://cdn.jwplayer.com/manifests/pZxWPRg4.m3u8","https://test-streams.mux.dev/dai-discontinuity-deltatre/manifest.m3u8"],t=(0,o.useState)(e[0]),n=(t[0],t[1],!0),u=!1,d=!0;(0,o.useEffect)((function(){if(!1===u){var t=function(t){document.getElementById("video"+t).addEventListener("click",(function(){n||(console.log("video"+t,"clicked"),document.getElementById("menu").style.opacity=0,console.log("set main src",e[t-1]),setTimeout((function(){n=!0}),100))}))};u=!0,console.log("init"),"undefined"!==typeof document&&ws_connect("good_button",(function(e){var t=document.getElementById("display"),n=document.createElement("span");"good"==e.data&&(n.innerHTML="\u2764",n.className="display_item",n.style.left=t.clientWidth*Math.random()+"px",t.appendChild(n),setTimeout((function(){n.remove()}),1300))}));for(var i=1;i<e.length+1;i++)t(i);document.getElementById("menu").addEventListener("click",(function(){if(d){document.getElementById("music").play(),d=!1;for(var t=0;t<e.length;t++)a(t+1,e[t])}n&&(document.getElementById("menu").style.opacity=1,n=!1,console.log("click"))}),[])}}),[]);var r=(0,s.useRouter)();return(0,o.useEffect)((function(){var t;console.log("query",r.query.src,r.query),void 0!==r.query.src&&(t=Number(r.query.src),console.log("change 0",t),null!==c[0]&&c[0].destroy(),setTimeout((function(){console.log("change main src",e[t]),a(0,e[t])}),300))}),[r.query]),(0,i.jsxs)("div",{children:[(0,i.jsx)(l.default,{src:"./ws.js",strategy:"beforeInteractive"}),(0,i.jsx)("audio",{src:"sample.mp3",id:"music"}),(0,i.jsxs)("div",{className:"visual bg-gray-700 z-0 overflow-hidden",id:"display",children:[(0,i.jsxs)("div",{id:"menu",className:"absolute top-0 left-0 z-10 w-full h-fit opacity-0 transition",children:[(0,i.jsx)("div",{className:"w-full h-screen opacity-90 bg-black z-10 absolute"}),(0,i.jsx)("div",{className:"z-30 text-white absolute h-fit w-full text-center mt-[7%]",children:e.map((function(e,t){return(0,i.jsx)("div",{className:"w-[32%] mx-1 inline-block z-40",children:(0,i.jsx)("video",{src:e,id:"video"+(t+1),autoPlay:!0,muted:!0,playsInline:!0})},e)}))})]}),(0,i.jsx)("div",{className:"movie",children:(0,i.jsx)("video",{autoPlay:!0,muted:!0,playsInline:!0,id:"video0"})}),(0,i.jsx)("div",{id:"good_button",children:"\u2764"})]})]})}},4298:function(e,t,n){e.exports=n(699)}},function(e){e.O(0,[933,774,888,179],(function(){return t=1713,e(e.s=t);var t}));var t=e.O();_N_E=t}]);